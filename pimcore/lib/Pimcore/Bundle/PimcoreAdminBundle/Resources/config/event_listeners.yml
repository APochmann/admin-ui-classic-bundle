services:
    pimcore_admin.event_listener.admin_session:
        class: Pimcore\Bundle\PimcoreAdminBundle\EventListener\AdminSessionListener
        arguments: ['@service_container']
        tags:
            - { name: kernel.event_subscriber }

    pimcore_admin.event_listener.authentication_double_check:
        class: Pimcore\Bundle\PimcoreAdminBundle\EventListener\AdminAuthenticationDoubleCheckListener
        arguments: ['@pimcore.service.request_matcher_factory', '%pimcode.admin.unauthenticated_routes%']
        tags:
            - { name: kernel.event_subscriber }

    pimcore_admin.event_listener.user_perspective:
        class: Pimcore\Bundle\PimcoreAdminBundle\EventListener\UserPerspectiveListener
        arguments: ['@pimcore_admin.security.user_resolver']
        calls:
            - [setPimcoreContextResolver, ['@pimcore.service.request.pimcore_context_resolver']]
            - [setLogger, ['@logger']]
        tags:
            - { name: kernel.event_subscriber }
            - { name: monolog.logger, channel: admin }

    pimcore_admin.event_listener.usage_statistics:
        class: Pimcore\Bundle\PimcoreAdminBundle\EventListener\UsageStatisticsListener
        arguments: ['@pimcore_admin.security.user_resolver']
        calls:
            - [setPimcoreContextResolver, ['@pimcore.service.request.pimcore_context_resolver']]
        tags:
            - { name: kernel.event_subscriber }
